webpackJsonp([22],{1854:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(787),o=a(i),l=n(101),r=a(l),d=n(370),s=a(d),p=n(1),u=a(p),c=n(124),h=a(c),f=n(2),g=a(f),y=n(6),m=a(y),b=n(4),v=a(b),w=n(5),k=a(w);n(788),n(125),n(371);var R=n(0),_=a(R),x=n(368),K=(n(50),n(186)),E=[{title:"序号",dataIndex:"id"},{title:"轮播图",dataIndex:"img_url",width:100},{title:"跳转地址",dataIndex:"addr_url"},{title:"创建时间",dataIndex:"create_time"},{title:"更新时间",dataIndex:"update_time"},{title:"操作",width:150}],C={display:"inline-block",padding:"0 10px",cursor:"pointer"},S=function(e){function t(e,n){(0,g.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e,n)),i=E.length;return E[i-1].render=function(e,t,n){return _.default.createElement("div",null,_.default.createElement("span",{onClick:a.tobannerForm.bind(a,t.id),style:C},"编辑"))},E[1].render=function(e,t,n){return _.default.createElement("div",{style:{width:100,height:50}},_.default.createElement("img",{style:{width:"100%"},src:"http://127.0.0.1:7001/public/uploads/"+t.img_url}))},a}return(0,k.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.loadTableData()}},{key:"loadTableData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this.props.dispatch({type:"banner/loadBanner",payload:{page:e,pageSize:t}})}},{key:"tableChange",value:function(e){this.loadTableData(e.current,e.pageSize)}},{key:"selectRow",value:function(e){this.props.dispatch({type:"banner/selectedRowKeys",payload:{selectedRowKeys:e}})}},{key:"tobannerForm",value:function(e){e?this.props.dispatch(K.routerRedux.push({pathname:"/banner/edit/"+e})):this.props.dispatch(K.routerRedux.push({pathname:"/banner/create"}))}},{key:"changebannerState",value:function(e){var t=e.status?0:1;this.props.dispatch({type:"banner/updateBanner",payload:(0,u.default)({},e,{status:t,page:this.props.pagination.current,pageSize:this.props.pagination.pageSize})})}},{key:"deletebanner",value:function(){var e=this;this.props.selectedRowKeys.length>0?s.default.confirm({title:"确定要删除所选数据?",content:"点击确定，数据则被删除",onOk:function(){var t=[];e.props.list.forEach(function(n,a){-1!==e.props.selectedRowKeys.indexOf(n.id)&&t.push(n.template)}),e.props.dispatch({type:"banner/removeBanner",payload:{selectedRowKeys:e.props.selectedRowKeys,templateArr:t}})}}):s.default.warning({title:"未选中任何数据",content:"请选择要删除的数据"})}},{key:"render",value:function(){var e={selectedRowKeys:this.props.selectedRowKeys,onChange:this.selectRow.bind(this)},t=(0,u.default)({showTotal:function(e){return"共"+e+"条数据"},showSizeChanger:!0,showQuickJumper:!0},this.props.pagination);return _.default.createElement("div",{className:"content-inner"},_.default.createElement("div",{style:{paddingBottom:10,marginBottom:20,borderBottom:"1px solid #ddd"}},_.default.createElement(r.default,{onClick:this.tobannerForm.bind(this,0),style:{marginRight:10}},"新增"),_.default.createElement(r.default,{onClick:this.deletebanner.bind(this)},"删除")),_.default.createElement(o.default,{columns:E,rowSelection:e,pagination:t,dataSource:this.props.list,rowKey:"id",loading:this.props.loading,bordered:!0,onChange:this.tableChange.bind(this)}))}}]),t}(R.Component);S.contextTypes={router:R.PropTypes.object},t.default=(0,x.connect)(function(e){var t=e.banner;return{list:t.list,loading:t.loading,total:t.total,selectedRowKeys:t.selectedRowKeys,pagination:t.pagination}})(S),e.exports=t.default}});